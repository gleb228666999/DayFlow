import json
import os
import time
import random
from datetime import datetime


time_prompts = [
    "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —ç—Ç–æ –∑–∞–Ω—è–ª–æ?:",
    "–ö–∞–∫ –¥–æ–ª–≥–æ –≤—ã —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞–ª–∏—Å—å?:",
    "–£–∫–∞–∂–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",
    "–ù–∞ —Å–∫–æ–ª—å–∫–æ —Ö–≤–∞—Ç–∏–ª–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞?",
    "–°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤—ã –ø—Ä–æ–≤–µ–ª–∏ –∑–∞ —ç—Ç–∏–º?",
    "–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:",
    "–ó–∞—Å–µ–∫–∞–ª–∏? –°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –ø—Ä–æ—à–ª–æ?",
    "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç—ã –ø–æ—Ç—Ä–∞—Ç–∏–ª –Ω–∞ —ç—Ç–æ –¥–µ–ª–æ? üòâ",
    "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ —É—à–ª–æ –Ω–∞ —ç—Ç—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å?",
    "–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:",
    "–í—Ä–µ–º—è, –ø—Ä–æ–≤–µ–¥—ë–Ω–Ω–æ–µ –∑–∞ —ç—Ç–∏–º –¥–µ–ª–æ–º:",
    "–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã —É–¥–µ–ª–∏–ª–∏ —ç—Ç–æ–º—É?",
    "–û—Ü–µ–Ω–∏—Ç–µ, —Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –∑–∞–Ω—è–ª–æ:",
    "–°–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏–ª–∏ —á–∞—Å–æ–≤ –ø—Ä–æ—à–ª–æ —Å –Ω–∞—á–∞–ª–∞?",
    "–í—ã–¥–µ–ª–∏–ª–∏ –Ω–∞ —ç—Ç–æ:",
]
def menu():
    while True:
        print("""
–ú–µ–Ω—é:
1. –ì–ª–∞–≤–Ω—ã–π –æ—Ç—á—ë—Ç
2. –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. –ú–æ–∏ —Ü–µ–ª–∏
4. –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–Ω–µ–π
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏
6. –ü–æ–º–æ—â—å
0. –í—ã—Ö–æ–¥
        """)

        try:
            choice = int(input("–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –º–µ–Ω—é (0-6): "))

            if choice == 1:
                show_report()
            elif choice == 2:
                add_activity()
            elif choice == 3:
                my_goals()
            elif choice == 4:
                calendar_days()
            elif choice == 5:
                settings()
            elif choice == 6:
                help_section()
            elif choice == 0:
                print("–î–æ –≤—Å—Ç—Ä–µ—á–∏!")
                break
            else:
                print("‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 0 –¥–æ 6.")

        except ValueError:
            print("‚ö†Ô∏è –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ.")


def clear_screen():
    # –î–ª—è Windows
    if os.name == 'nt':
        os.system('cls')
    # –î–ª—è macOS –∏ Linux
    else:
        os.system('clear')


# –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π (–∏—Ö –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ)
def show_report():
    print("üìä –ó–¥–µ—Å—å –±—É–¥–µ—Ç –≥–ª–∞–≤–Ω—ã–π –æ—Ç—á—ë—Ç...")


def add_activity():
    clear_screen()
    print("‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏")
    print("""
    –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
    1. –û—Ç–¥—ã—Ö
    2. –°–æ–Ω
    3. –†–∞–±–æ—Ç–∞
            """)
    akt = int(input("–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (1-3): "))
    if akt == 1:
        akt = "–û—Ç–¥—ã—Ö"
    if akt == 2:
        akt = "–°–æ–Ω"
    if akt == 3:
        akt = "–†–∞–±–æ—Ç–∞"

    time_task = input(random.choice(time_prompts))
    save_activity(
        category=akt,
        duration=time_task,
        date=datetime.now().strftime("%Y-%m-%d"),
        time_today=datetime.now().strftime("%H:%M")
    )



def save_activity(category, duration, date, time_today):
    # –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
    try:
        with open("activities.json", "r", encoding="utf-8") as file:
            data = json.load(file)
    except (FileNotFoundError, json.JSONDecodeError):
        # –ï—Å–ª–∏ —Ñ–∞–π–ª–∞ –Ω–µ—Ç –∏–ª–∏ –æ–Ω –ø—É—Å—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
        data = {"activities": []}

    # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
    activity = {
        "category": category,
        "duration": duration,
        "date": date,
        "time": time_today
    }
    data["activities"].append(activity)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ —Ñ–∞–π–ª
    with open("activities.json", "w", encoding="utf-8") as file:
        json.dump(data, file, ensure_ascii=False, indent=4)

    print("‚úÖ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!")






def my_goals():
    print("üéØ –ú–æ–∏ —Ü–µ–ª–∏...")


def calendar_days():
    print("üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –¥–Ω–µ–π...")


def settings():
    print("‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏...")


def help_section():
    print("‚ùì –ü–æ–º–æ—â—å –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏...")


# –ó–∞–ø—É—Å–∫
menu()